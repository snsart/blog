## diary

* 20190402

### 循环展开
循环展开对程序的优化体现在两个方面：
1. 减少循环指令开支，比如条件判断，累加操作；
2. 循环体内的多个数值可以运用处理器指令级并行能力进行同时操作；

运用指令级并行能力，达到吞吐量的下限，有两种方法：
1. 增加寄存器
比如多个数乘法运算，可以分解为奇数项和偶数项分别相乘，存在不同的寄存器中，最后再合并；
2. 运算顺序重新结合
借助乘法和加法的交换律，先运算与寄存器无关的项；

### 一些限制因素
1. 寄存器溢出，当循环展开过大，使循环体内的寄存器数量大于处理器中寄存器数量时，数据会存储在内存栈中，这样反而会增加访问开销；
2. 条件判断错误，由于处理器按流水线执行指令，当发现条件判断错误时，前面的计算会丢弃，浪费性能；解决办法：把条件判断改为条件数据；
