在构建大型程序的时候，为了方便代码管理，会根据不同的功能把代码分为多个片段（或模块）并存储在不同的文件中，在代码执行时需要把这些代码模块合并成一个单一的可执行文件，这个合并过程称之为链接。接下来我们先汇总一下链接过程会遇到哪些问题，再逐个分析每个问题是如何解决的。

一、链接会遇到的问题

1. 链接之后形成的文件格式
需要知道链接的方向，知道可执行文件要具备哪些特点；
2. 链接所需的文件格式
链接合并的是源文件编译之后形成的可重定位目标文件，这个文件的格式需要具备哪些特点；
3. 什么时候开始链接
编译时、加载时还是运行时
4. 命名冲突问题
在可执行文件中必须保证每个符号定义都是唯一的（局部变量除外），而被合并的多个文件中可能存在多个相同的符号定义；
5. 内存地址分配问题，在可执行文件中代码和每个数据都需要有唯一的地址，在被合并的多个文件中代码和数据的地址和可执行文件中是不一样的，该如何调整；
6. 如何根据引用的符号查找符号的定义。

二、链接的方向：可执行目标代码的特点

代码编译并链接之后形成的文件称之为可执行目标文件，当文件载入内存中时，代码在内存中分为如下字段：

从图中可知，可执行目标文件要能够正确的载入内存，系统必须能够明确的区分文件中涉及的符号类型，并能够通过符号找到唯一的内存地址。在可执行目标文件中专门有一个符号表来管理文件中的符号，符号表中的符号分为下面几类：
1). 代码，比如函数名，它代表了一段指令的集合
2). 已初始化数据，包括全局变量和静态变量
3). 未初始化数据，包括全局变量和静态变量
上面每一个符号，对应着一个唯一的定义，不同类型符号的定义存在文件的不同节中，代码存在.text节，已初始化的数据存在.data节，未初始化的数据或初始化为0的数据存在.BSS节。加载器将可执行目标文件载入内存中时，会通过查找符号表，把.text节中对应的符号替换为相应的值；

可执行目标文件总结如下：
1. 符号表中的符号是唯一的；
2. 符号表中的每个符号都有唯一的地址，并且通过符号能找到对应的定义；

三、链接的起点：可重定位目标文件的特点
源代码通过编译器编译之后会形成可重定位目标文件