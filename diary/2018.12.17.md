# 算法

### 画虚线
已知工具:
`
//将画笔起始点移至(x,y)
moveTo(x,y)
//从起始点画线至(x,y)
lineTo(start,end)
`
#### 画虚线思路：
将起始点到终点根据虚线节端的长度分成n段，依次用moveTo和lineTo函数画每一小段，javaScript代码如下：
`
/*
 start:起始点
 end:终点
 space:间隔空间（节点和间隔空间一致）
 */
function drawDottedLine(start,end,space){	
	var lineLength=Math.sqrt((end.x-start.x)*(end.x-start.x)+(end.y-start.y)*(end.y-start.y));
	var numLine=Math.floor(lineLength/(space*2));//节段的数量
	var dxg=end.x-start.x;
	var dyg=end.y-start.y;
	//每一小节在x和y轴方向上的投影长度
	var dx=dxg*space/lineLength;
	var dy=dyg*space/lineLength;
	for(var i=0,x=start.x,y=start.y;i<numLine;i++,x+=dx*2,y+=dy*2){
		moveTo(x,y);
		lineTo(x+dx,y+dy);
	}
}

`

### 求两线段是否相交(每条线段的两个端点已知)；
`
/*
 已知两条线段line1和line2，求它们是否相交
 * */

function hasCross(line1,line2){
	var s1=line1.start;
	var e1=line1.end;
	var s2=line2.start;
	var e2=line2.end;
	
	//检查line2的两个端点是否在line1的两侧；
	var checkLine2;
	var vecs1e1={x:e1.x-s1.x,y:e1.y-s1.y};
	var vecs1s2={x:s2.x-s1.x,y:s2.y-s1.y};
	var vecs1e2={x:e2.x-s1.x,y:e2.y-s1.y};
	checkLine2=getCross(vecs1e1,vecs1s2)*getCross(vecs1e1,vecs1e2)<0;
	
	//检查line1的两个端点是否在line2的两侧；
	var checkLine1;
	var vecs2e2={x:e2.x-s2.x,y:e2.y-s2.y};
	var vecs2s1={x:s1.x-s2.x,y:s1.y-s2.y};
	var vecs2e1={x:e1.x-s2.x,y:e1.y-s2.y};
	checkLine1=getCross(vecs2e2,vecs2s1)*getCross(vecs2e2,vecs2e1)<0;
	
	return checkLine1&&checkLine2;
	/*求两向量叉积*/
	function getCross(vector1,vector2){
		return vector1.x*vector2.y-vector2.x*vector1.y;
	}
}
`