## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## 简单模板模式
简单模板模式提供了更高效的创建视图的方式，避免了创建视图时大量节点的操作。简单模板实现了数据和模板的分离。
### 举例
比如我们要用js创建下面这样的视图，笨拙的办法是创建一个个节点再拼接在一起，效率很低，用模板模式就要高效的多。
```html
<h>this is head</h>
<div>
	<a>this is demo</a>
	<p>this is p</p>
</div>
```
#### 模板模式
我们先构建一个模板：
```javascript
tp="<h>{#head#}</h><div><a>{#demo#}</a><p>{#p#}</p></div>"

```
下面是数据，需要用这些数据来格式化模板：
```javascript
data={
	head:"this is head",
	demo:"this is demo",
	p:"this is p"
}

```
我们需要一个渲染方法，来完成渲染，即把tp中的{#head#}替换为data中head属性的值：
function formateString(tp,data){
	return tp.replace(/\{#(\w+)#\}/g,function(match,key){
		return typeof data[key]===undefined?"":data[key];
	});
}
这里的key是第一次匹配的捕获组

### 模板生成器
由于模板中的每一行都是类似<name>{#name#}</name>的形式，因此我们可以创建一个模板生成器，来生成一些常用的模板：
```
var view=function(name){
	var v={
		code:'<pre><code>{#code#}</code></pre>',
		img:'<img src="{#src}" alt="{#alt#}" title="{#title#}"/>',
		part:'<div id="{#id#}" class="{#class#}">{#part#}</div>'
	}
	return v[name]?v[name]:('<'+name+'>{#'+name+'#}</'+name+'>');

}
```
