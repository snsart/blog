## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## react总结：产生、特征、组成及应用
### 产生
React是Facebook开发的一款的JS库，那么Facebook为什么要创造React？<br>
Facebook认为MVC不适合大规模的应用，当系统中有很多模型和相应的视图时，其复杂度就会迅速扩大，非常难以理解和调试，特别是模型和视图可能存在双向数据流动，因为MVC模式中，模型的改变不会自动反映在视图上。<br>
* react主要用来构建数据会随着时间改变的大型应用

### 特征
* React 的核心思想是：封装组件。各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。<br>
react特征总结如下：
1. 描述任意时间点应用应该呈现的样子，当数据发生变化的时候， React就会自动管理UI界面更新；
2. 为了保证性能，在数据发生改变时，React实际上仅仅更新了发生变化的那一小部分；
3. React不是一个MVC框架，React是一个构造可组合式用户界面的库。它鼓励创建可重用的会随着时间而改变数据的UI组件。 
4. React不使用模板来创建UI，而是通过创建各种组件来构建用户界面。
5. 响应式更新：在一个JS应用中，需要考虑数据变化然后指示DOM做出变化，使其保持最新。React采用的方法是，当组件第一次初始化时，render方法调用，生成一个轻量级的表现。通过这个表现，产生一个标签字符串，然后插入文档中。当数据变化时，render方法再次被调用。为了尽可能有效的完成更新，需要比较之前调用的render返回的值与新的值，通过算法产生一个最小的变更，然后应用在DOM中。

#### React中DOM是如何更新的：虚拟DOM与真实DOM
在传统的web应用中，一般是直接操作DOM进行更新的,而我们知道DOM更新通常是比较昂贵的。React为了尽可能减少对DOM的操作，运用代理模式(Proxy)的设计思想，提供了一个虚拟DOM对象，用来描述DOM应该是什么样子的以及该如何呈现。通过这个虚拟DOM来管理和更新真实DOM。在代码中我们只是操作和改变虚拟DOM，但虚拟DOM的改变并不会立刻反应在真实DOM中，只有在虚拟DOM更新完成之后（比如事件循环结束后），再统一更新真实DOM。为了保证真实DOM的更新效率（即用最小的步骤完成更新），这里用到了一个非常高效的diff算法，这个算法通过比较虚拟DOM与当前的真实DOM的差异，来生成最小的更新步骤。

#### diff算法
1. 虚拟的DOM确保了只对界面上真正发生变化的部分进行实际的DOM操作。那如何判断DOM是否发生了变化呢？ 
Facebook的工程师，他们对于web界面做了两个简单的假设，使得Diff算法复杂程度直接降到了O(n) 
1) 两个相同组件产生相同的DOM结构，不同组件产生不同的DOM结构 
2) 对于同层次的一组子节点，他们可以通过唯一的id进行区分(key值)
当React在同一个位置遇到不同的组件时，会简单的销毁第一个组件，而把新创建的组件加上去。不同的组件一般会产生不一样的DOM结构，与其浪费时间去比较它们的结构，还不如完全创建一个新的组件上去。

2. 逐层次进行节点比较 
在React中，树的算法很简单，两棵树只会对同层次的节点进行比较。当同层次节点一样时，再比较子节点，当发现节点已经不存在了，就会把这个节点和它的子节点完全删除掉，不会进行进一步的比较，所以这样只要遍历一次树，就可以完成对DOM结构的比较。

3. 同层次列表节点的比较
React对于不在同一层的节点比较，即使它们完全相同，也会销毁并重新创建，当它们在同一层的时候需要为列表设置key值，否则列表更新会出现性能问题。

## 组成
1. 组件

2. JSX
将 HTML 直接嵌入了 JS 代码里面，这个就是 React 提出的一种叫 JSX 的语法，这应该是最开始接触 React 最不能接受的设定之一，因为前端被“表现和逻辑层分离”这种思想“洗脑”太久了。但实际上组件的 HTML 是组成一个组件不可分割的一部分，能够将 HTML 封装起来才是组件的完全体，React 发明了 JSX 让 JS 支持嵌入 HTML 不得不说是一种非常聪明的做法，让前端实现真正意义上的组件化成为了可能。<br>
可以不一定使用这种语法。现在要知道的是，要使用包含 JSX 的组件，是需要“编译”输出 JS 代码才能使用的。
3. Virtual DOM
4. Data Flow
“单向数据绑定”是 React 推崇的一种应用架构的方式。当应用足够复杂时才能体会到它的好处，虽然在一般应用场景下你可能不会意识到它的存在，也不会影响你开始使用 React，你只要先知道有这么个概念。

## 应用
搭建开发环境流程如下：
1. 确保电脑上安装了node.js
2. 首先全局安装create-react-app模块
```
npm install -g create-react-app
```
3. 进入你希望创建项目的目录，然后执行如下命令:
```
create-react-app hello-world
```
执行上面命令后会在目录下创建一个hello-world项目<br>

如果node版本在5.2以上，可以不安装create-react-app模块，直接用下面的命令创建项目：
```
npm create-react-app my-app
```
4. 进入到项目目录并运行React项目
```
cd hello-world
npm start
```
5. 编译项目
```
npm run build
```