## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## three.js笔记——二元操作
通过二元操作，可以使简单几何体通过联合、相减、相交等操作，形成复杂的几何体

### threeBSP
使用二元操作，需要引入three.js的一个扩展库threeBSP，threeBSP可以从github上获得，它是用coffee-script脚本写的，在使用之前需要先编译成javascript，编译方法如下
1. 用下列命令安装coffeescript
```
->npm install -g coffee-script
```
2. 安装完成后，进入要编译的文件所在目录，比如要编译threeBSP.coffee这个文件，就在文件当前目录执行：
```
->coffee -c threeBSP.coffee
```
一个名为threeBSP.js的文件就出现在当前目录下了。这个指令也可以应用于目录， 比如你把项目中所有的coffee源文件放到了src目录下，那就执行：
```
->coffee -c src
```

### 操作
threeBSP中提供了三个函数：subtract、intersect以及union,具体用法如下：
* subtract为从一个几何体中减去与另一个几何体相交的部分
* intersect得到两个几何体相交的部分
* union将两个几何体组合在一起形成一个新的几何体
在使用时，需要把几何体作为参数，创建一个threeBSP对象，然后对threeBSP对象进行操作，举例如下：
```
//创建两个圆柱形几何体
var geometry1 = new THREE.CylinderGeometry( 300, 300, 600, 200,1,false);
var geometry2 = new THREE.CylinderGeometry( 150, 150, 300, 200,1,false);
//根据几何体创建两个threeBSP对象
var geom1BSP=new ThreeBSP(geometry1);
var gemo2BSP=new ThreeBSP(geometry2);
//从第一个几何体中减去第二个几何体
var resultBSP=geom1BSP.subtract(gemo2BSP);
//把resultBSP对象转换为几何体
var geom=resultBSP.toGeometry();
//下面就可以像使用其他几何一样使用geom了
cylinder=new THREE.Mesh(geom,material);
scene.add(cylinder);

```
