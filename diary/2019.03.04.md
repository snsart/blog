## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## react-redux与react-router入门
### react-redux
安装
```
$ npm install react-redux -save
```
在使用redux库为react组件传递信息时，很多时候需要为react组件传递大量的action作为属性，特别是当组件有嵌套时，属性需一层一层向下传递，这样写起来会非常麻烦。redux的开发者为了解决这个问题，开发了react-redux库。
** 设计思想
react-redux将组件分为了两类，UI组件和容器组件。其中UI组件只负责生成视图，不处理任何业务逻辑，并且没有this.state，所有的数据都由this.props提供。容器组件负责管理数据和逻辑。为了将UI组件提供的视图和容器组件的逻辑结合起来，react-redux提供了一个connect方法，可以将connect理解成一个装饰器，传入UI组件，通过connect装饰后，返回一个容器组件。下面是connet函数的API：
```
const Component = connect(
  mapStateToProps,
  mapDispatchToProps
)(UIComponent)
```
上面代码中，connect方法接受两个参数：mapStateToProps和mapDispatchToProps。它们定义了 UI 组件的业务逻辑。前者负责输入逻辑，即将state映射到 UI 组件的参数（props），后者负责输出逻辑，即将用户对 UI 组件的操作映射成 Action。

* mapStateToProps
mapStateToProps是一个函数。它的作用就是像它的名字那样，建立一个从（外部的）state对象到（UI 组件的）props对象的映射关系。作为函数，mapStateToProps执行后应该返回一个对象，里面的每一个键值对就是一个映射。
```
const mapStateToProps=(state)=>{
	return {num:state};
}
```

* mapDispatchToProps
mapDispatchToProps是connect函数的第二个参数，用来建立 UI 组件的参数到store.dispatch方法的映射。也就是说，它定义了哪些用户的操作应该当作 Action，传给 Store。它可以是一个函数，也可以是一个对象。

** <Provider> 组件
Provider在根组件外面包了一层，这样一来，在Provider传入state，App的所有子组件就默认都可以拿到state了。Provider的唯一功能就是传入store对象。
```
<Provider store={store}>
    <Router>
      <Route path="/" component={App} />
    </Router>
</Provider>
```
### react-router
安装
```
$ npm install react-router -save
```
react-router是为了解决组件加载和切换的问题。核心逐渐有Router和Route，Router组件本身只是一个容器，真正的路由要通过Route组件定义。
```
import { Router, Route, hashHistory } from 'react-router';
render((
  <Router history={hashHistory}>
    <Route path="/" component={App}/>
  </Router>
), document.getElementById('app'));

上面代码中，用户访问根路由/（比如http://www.example.com/），组件APP就会加载到document.getElementById('app')。
```

