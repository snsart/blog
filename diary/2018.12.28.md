## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## 备忘录（Memento）
备忘录模式(Memento Pattern)：在不破坏封装的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，这样可以在以后将对象恢复到原先保存的状态。它是一种对象行为型模式，其别名为Token<br>
![备忘录](https://github.com/snsart/blog/blob/master/diary/images/2018122801.jpg);

### 使用场景
1. 打游戏时的存档。 
2. 撤销。 
3. IE 中的后退。 
4. 数据库的事务管理。

### 备忘录模式中的角色
备忘录模式包含如下角色：
* Originator: 原发器
* Memento: 备忘录
* Caretaker: 负责人<br>
原发器和备忘录是紧密相关的一对，备忘录保存了原发器的部分或所有状态，可以把备忘录理解为原发器某一时刻的状态集合。原发器的这些状态只能保存在备忘录中，因为暴露给其他对象内部状态将违反封装的原则。<br>
为了实现对备忘录对象的封装，需要对备忘录的调用进行控制:
1. 对于原发器而言，它可以调用备忘录的所有信息，允许原发器访问返回到先前状态所需的所有数据；
2. 对于负责人而言，负责备忘录的保存并将备忘录传递给其他对象，负责维护原发器的备忘录列表，即原发器一系列时间节点的状态集合，这样可以实现撤销重做等功能；
3. 对于其他对象而言，只需要从负责人处取出备忘录对象并将原发器对象的状态恢复，而无须关心备忘录的保存细节。

### 缺点
资源消耗过大，如果类的成员变量太多，就不可避免占用大量的内存，而且每保存一次对象的状态都需要消耗内存资源，如果知道这一点大家就容易理解为什么一些提供了撤销功能的软件在运行时所需的内存和硬盘空间比较大了。

### 前端应用举例
用备忘录来缓存已访问过的信息，比如博客的上下页，点击下一页之后把这一页的内容存入备忘录，当重新访问本页面时，无须从服务器重新拉取数据。
