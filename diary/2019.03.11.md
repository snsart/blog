## [<<目录](https://github.com/snsart/blog/blob/master/README.md)

## git总结

初始化一个Git仓库，使用git init命令。<br>
添加文件到Git仓库，分两步：<br>
使用命令git add <file>，注意，可反复多次使用，添加多个文件；<br>
使用命令git commit -m <message>，完成。<br>
添加多个文件到暂存区 git add .<br>

要随时掌握工作区的状态，使用git status命令。<br>
如果git status告诉你有文件被修改过，用git diff可以查看修改内容。<br>
查看文件内容cat <file><br>

### 时间穿梭
HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令git reset --hard commit_id。<br>
穿梭前，用git log可以查看提交历史，以便确定要回退到哪个版本。<br>
要重返未来，用git reflog查看命令历史，以便确定要回到未来的哪个版本。<br>

场景1：当你改乱了工作区某个文件的内容，想直接丢弃工作区的修改时，用命令git checkout -- file。<br>
场景2：当你不但改乱了工作区某个文件的内容，还添加到了暂存区时，想丢弃修改，分两步，第一步用命令git reset HEAD <file>，就回到了场景1，第二步按场景1操作。<br>
场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，参考版本回退一节，不过前提是没有推送到远程库。<br>

命令git rm用于删除一个文件。如果一个文件已经被提交到版本库，那么你永远不用担心误删，但是要小心，你只能恢复文件到最新版本，你会丢失最近一次提交后你修改的内容。<br>

### 分支管理
查看分支：git branch<br>
创建分支：git branch <name><br>
切换分支：git checkout <name><br>
创建+切换分支：git checkout -b <name><br>
合并某分支到当前分支：git merge <name><br>
删除分支：git branch -d <name><br>

当Git无法自动合并分支时，就必须首先解决冲突。解决冲突后，再提交，合并完成。<br>
解决冲突就是把Git合并失败的文件手动编辑为我们希望的内容，再提交。<br>
用git log --graph命令可以看到分支合并图。<br>

Git分支十分强大，在团队开发中应该充分应用。<br>
合并分支时，加上--no-ff参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而fast forward合并就看不出来曾经做过合并。<br>
git merge --no-ff -m "merge with no-ff" dev <br>

修复bug时，我们会通过创建新的bug分支进行修复，然后合并，最后删除；<br>
当手头工作没有完成时，先把工作现场git stash一下，然后去修复bug，修复后，再git stash pop，回到工作现场。<br>

开发一个新feature，最好新建一个分支；<br>
如果要丢弃一个没有被合并过的分支，可以通过git branch -D <name>强行删除。<br>

要关联一个远程库，使用命令git remote add origin git@github.com:yourname/repo-name.git <br>
关联后，使用命令git push -u origin master第一次推送master分支的所有内容；<br>
此后，每次本地提交后，只要有必要，就可以使用命令git push origin master推送最新修改；<br>

查看远程库信息，使用git remote -v；<br>
本地新建的分支如果不推送到远程，对其他人就是不可见的；<br>
从本地推送分支，使用git push origin branch-name，如果推送失败，先用git pull抓取远程的新提交；<br>
在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；<br>
建立本地分支和远程分支的关联，使用git branch --set-upstream branch-name origin/branch-name；<br>
从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。<br>

rebase操作可以把本地未push的分叉提交历史整理成直线；<br>
rebase的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。<br>

命令git tag <tagname>用于新建一个标签，默认为HEAD，也可以指定一个commit id；<br>
命令git tag -a <tagname> -m "blablabla..."可以指定标签信息；<br>
命令git tag可以查看所有标签。<br>

命令git push origin <tagname>可以推送一个本地标签；<br>
命令git push origin --tags可以推送全部未推送过的本地标签；<br>
命令git tag -d <tagname>可以删除一个本地标签；<br>
命令git push origin :refs/tags/<tagname>可以删除一个远程标签。<br>

在GitHub上，可以任意Fork开源仓库；<br>
自己拥有Fork后的仓库的读写权限；<br>
可以推送pull request给官方仓库来贡献代码。<br>

忽略某些文件时，需要编写.gitignore；
.gitignore文件本身要放到版本库里，并且可以对.gitignore做版本管理！

* 常见问题解决方案：
Git操作的过程中突然显示Another git process semms to be running in this repository, e.g. an editor opened by ‘git commit’. Please make sure all processes are terminated then try again. If it still fails, a git process remove the file manually to continue… 
翻译过来就是git被另外一个程序占用，重启机器也不能够解决。<br>
原因在于Git在使用过程中遭遇了奔溃，部分被上锁资源没有被释放导致的。<br>
解决方案：进入项目文件夹下的 .git文件中（显示隐藏文件夹或rm .git/index.lock）删除index.lock文件即可。<br>

